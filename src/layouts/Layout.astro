---
const { title } = Astro.props;

import Navbar from "../components/Navbar.astro";
---

<html lang="en">
    <head>
        <script is:inline>
            if (
                localStorage.theme === "dark" ||
                (!("theme" in localStorage) &&
                    window.matchMedia("(prefers-color-scheme: dark)").matches)
            ) {
                document.documentElement.classList.add("dark");
            } else {
                document.documentElement.classList.remove("dark");
            }
        </script>

        <meta charset="utf-8" />

        <title>{title}</title>
    </head>

    <body
        class="min-h-screen mx-auto max-w-3xl p-6 font-sans
        bg-gray-50 text-gray-900
        dark:bg-gray-900 dark:text-gray-100"
    >
        <Navbar />

        <slot />

        <footer class="text-center text-gray-500 text-sm mt-10 pb-4">
            Created by Gabo in 2025
        </footer>

        <!-- Toggle logic -->
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const btn = document.getElementById("theme-toggle");
                if (!btn) return;

                btn.addEventListener("click", () => {
                    const isDark =
                        document.documentElement.classList.toggle("dark");
                    localStorage.theme = isDark ? "dark" : "light";
                });
            });
        </script>
    </body>
</html>
